<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biographie RA - Ada Lovelace</title>
    
    <!-- 1. Librairies AR.js et A-Frame -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <style>
        /* Styles pour garantir que la RA couvre tout l'écran du smartphone */
        body { margin: 0; overflow: hidden; font-family: 'Arial', sans-serif; }
        
        /* Styles pour le message de dépannage/aide (Kawaii) */
        #help-message {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000;
            padding: 20px; background-color: #FFECF4; /* Rose très pâle */
            color: #FF69B4; /* Rose vif pour le texte */
            border: 4px solid #FFC0CB; /* Bordure Rose Bonbon */
            border-radius: 20px; text-align: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            font-size: 1.2em; line-height: 1.5; font-weight: bold;
        }
        #help-message strong { display: block; font-size: 1.5em; margin-bottom: 10px; }
        #marker-link { color: #C084FC; text-decoration: underline; margin-top: 10px; display: block; }
    </style>
</head>

<!-- Initialisation de la scène AR.js : utilise la webcam et cherche le marqueur HIRO -->
<body embedded arjs='sourceType: webcam; detectionMode: mono; patternRatio: 0.9; debugUIEnabled: false;'>

    <!-- Message de Dépannage/Aide visible avant la détection du marqueur -->
    <div id="help-message">
        <strong>✨ Biographie d'Ada Lovelace ! ✨</strong>
        <p>1. Assurez-vous d'avoir autorisé la **caméra**.</p>
        <p>2. Pointez votre appareil photo sur le **Marqueur HIRO**.</p>
        <p>3. Le Marqueur doit être **plat, net et bien éclairé**.</p>
        <!-- Le lien ici pointe vers le fichier HIRO que vous avez (ou que vous devriez) uploader sur GitHub -->
        <a id="marker-link" href="./hiro.png" target="_blank">Cliquez ici pour voir et imprimer le Marqueur HIRO !</a>
    </div>

    <!-- Script pour masquer le message d'aide lorsque la RA est prête -->
    <script>
        window.addEventListener('load', () => {
            const scene = document.querySelector('a-scene');
            const helpMessage = document.getElementById('help-message');
            
            scene.addEventListener('arjs-original-contents-loaded', () => {
                console.log('AR.js est prêt. Le message d\'aide est masqué.');
                if (helpMessage) {
                    helpMessage.style.display = 'none';
                }
            });

            scene.addEventListener('camera-error', (e) => {
                if (helpMessage) { 
                     helpMessage.innerHTML = '<strong>❌ ERREUR CAMÉRA ! ❌</strong><p>Veuillez autoriser l\'accès à la caméra et recharger la page.</p>';
                }
            });
        });
    </script>


    <!-- SCÈNE A-FRAME ET AR.JS -->
    <a-scene 
        embedded 
        vr-mode-ui="enabled: false"
        arjs='sourceType: webcam; detectionMode: mono; patternRatio: 0.9; debugUIEnabled: false;'
    >

        <!-- ANCRE DU MARQUEUR (HIRO PREDÉFINI) -->
        <a-marker type='pattern' url='./ada_lovelace.patt'>

            <!-- 1. IMAGE DE LA BIOGRAPHIE D'ADA LOVELACE -->
            <!-- ATTENTION : REMPLACER L'URL CI-DESSOUS PAR L'URL PUBLIQUE DU PNG DE L'ÉLÈVE -->
            <a-image
                src="./biographie_ada.png" 
                position="0 0.5 0"         
                rotation="-90 0 0"       
                width="0.3"                
                height="0.2"             
                opacity="0.9"             
            ></a-image>

            <!-- 2. ÉLÉMENT KAWAII SUPPLÉMENTAIRE (cône tournant) -->
            <a-cone 
                position="0 1.6 0" 
                rotation="90 0 0" 
                radius-bottom="0.5" 
                height="0.8"
                color="#C084FC" 
                animation="property: rotation; to: 90 360 0; loop: true; dur: 3000; easing: linear;"
            >
            </a-cone>

        </a-marker>

        <!-- CAMÉRA (Nécessaire pour le flux vidéo) -->
        <a-entity camera></a-entity>

    </a-scene>
</body>
</html>
